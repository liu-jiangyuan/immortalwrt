
. /lib/functions.sh
. /lib/functions/uci-defaults.sh
. /lib/functions/system.sh

# 只修改 BT R320 对应的接口
mediatek_setup_interfaces()
{
	local board="$1"

	case $board in
	bt,r320)
		# LAN 用 lan1 lan2 lan3，WAN 用 wan
		ucidef_set_interfaces_lan_wan "lan1 lan2 lan3" "wan"
		;;
	*)
		# 兜底，不会影响 r320
		ucidef_set_interfaces_lan_wan "lan1 lan2 lan3 lan4" "wan"
		;;
	esac
}

mediatek_setup_macs()
{
	local board="$1"

	case $board in
	bt,r320)
		# MAC 已在 DTS 用 nvmem 绑定，WAN/LAN 自动生成
		;;
	esac
}

# === 执行 ===
board_config_update
board=$(board_name)

mediatek_setup_interfaces "$board"
mediatek_setup_macs "$board"

board_config_flush
exit 0
